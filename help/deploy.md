---
layout: help
title: Deploy
---

Вы можете деплоить выши приложения прямо из CI.

Деплой это отдельная задача которая выполняется после всех остальных задача и только
если все остальные задачи закончились успешно, поэтому его можно безболезненно
использовать с матрицами.

Поддерживается деплой с использванием __ssh__

* У каждого проекта в vexor.io есть пара  ssh ключей
* Перед выполнением тестов на машине запускается ssh-agent и в него добавляется
ключ от текущего проекта

Для того что иметь доступ на серверы для деплоя с машины на которой идут тесты,
вам нужно скопировать public ssh key от проекта. Public ssh key можно найти в
настройках проекта, его нужно будет добавить в файл ~/.ssh/authorized_keys,
например такой командой

    curl -s https://ci.vexor.io/api/projects/<PROJECT_ID>/key.txt >> \
      ~/.ssh/authorized_keys

Ssh уже сконфигурирован что использовать ssh-agent, а также не делать host key checking.

Для описания команд выполняемых при делое используется ключ ``deploy``, вот пример
конфигурации которая запускает делой с использованием capistrano

    deploy:
      shell: cap staging deploy

Вы также можете указать что бы делой запускался только в определенных баранчах, или
разные команды для запуска деплоя в зависимости от бранча

    deploy:
    - shell: cap staging deploy
      branch: master
    - shell: cap qa deploy
      branch:
      - feature/1
      - feature/2
