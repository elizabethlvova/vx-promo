---
layout: help
title: Configuration
---

Конфигурация билда должна находисться в YAML файле с названием ``.travis.yml`` в корне
проекта. Для поддерживаемых языков конфигурация очень простая, достаточно указать
в ключе ``language`` что именно вы хотите использовать, например ``language: ruby``.
В этом случае подготовка окружения и запуск тестов будут происходить автоматически
основываясь на соглашениях принятых в конкретном языке. Где то одного ключа будет хватать,
например в ``clojure``, а где то скорее всего потребуется дополнительная настройка.

Если шаги для запуска тестов которые предлагаются по умолчанию для языка, вас не
устраивают, то можно их изменить ключами ``install``, ``script``, ``before_install`` и
``before_script``. В этих ключах указываются команды которые будет выпоняеть shell.

* __env__ позволяет указать переменные окружения которые могут использоваться в
тестах

* __before_install__ запускается как понятно из названия перед установкой, может
потребоваться для установки каких либо библиотек нужных для зависимостей вашего проекта.

* __install__ запускает команды на установку зависимостей, библиотек и всего того что
может потребоваться для запуска тестов. Если этот ключ пустой то будут использоватся
команды для каждого конкретного языка, например для ``ruby`` это ``bundle install``, а для ``go``, это
``go get -v ./...``

* __before_script__ здесь можно подготовить различные используемые сервисы для
запуска тестов, настроить базу например.

* __script__ запускает непосредственно сами тесты, если этот ключ пустой, то будут
выполняться команды по умолчанию для каждого конкретного языка.

Вот пример конфигурации которая использует некоторые перечисленные ключи

    language: ruby

    before_install: sudo apt-get install libicu-dev

    before_script:
    - psql -U postgres -c 'create database test;'
    - bundle exec rake db:migrate

    script: bundle exec rake test:ci

Помимо обычных ключей с командами, есть еще возможность построить матрицы билдов,
те запускать один билд одновременно в нескольких конфигурациях. Список ключей по
которым может строиться матрица

* __env__ переменные окружения
* __rvm__ версии руби
* __jdk__ версии java
* __scala__ версии scala
* __go__ версии go
* __node_js__ версии node.js

Матрицы помимо тесторония нескольких конфигураций могут понадобится на распаралеливания
тестов. Вы можете разбить ваши тесты на неколько частей и выполнять их одновременно.
Это позволяет получить значительный выигрыш в скорости - например с сократить время
тестирования с часа до 5 минут. Так как в vexor.io тарификация идет по используемым
ресурсам нет никакой раздницы будут ли выполнять тесты на одном воркере 1 час или на 12
воркерах 5 минут.

Помимо вышеперичисленного, можете поменять таймауты поторые используются при запуске тестов,

* __timeout__ максимальноые время выполения теста, по умочанию 1 час. если тест
не успел в течении этого времени закончится, то прекрачается принудительно.

* __read timeout__ по умолчанию 10 минут, если в течении этого времени ничего в
stdout не появилось, то тест прекращается, read timeout нужен для того что бы в
случае зависшей задачи не ждать целый час.

Таймауты позволяют прекращаять принудительно зависшые задачи, но иногда они могут мешать.
В этом случае их можно увеличить, в vexor.io вы платите только за используемые ресурсы,
поэтому мы позволяем использовать любые значения для таймаутов.

* __vexor.timeout__ максимальноые время выполнения задачи в секундах, может быть
любое
* __vexor.read_timeout__ таймаут чтения в секундах, может быть любым.

